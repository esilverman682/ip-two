"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t,r=require("react"),n=e(require("tweakpane")),o=e(require("get-value")),u=e(require("set-value")),i=require("change-case");function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}!function(e){e[e.SEPARATOR=0]="SEPARATOR",e[e.FOLDER=1]="FOLDER",e[e.BUTTON=2]="BUTTON",e[e.MONITOR=3]="MONITOR"}(t||(t={}));var c,s={root:{}};function f(e,r){return Object.entries(e).reduce((function(e,n){var i,c,l,p,v,d=n[0],y=n[1],O=o(s,r+".inputs");return O||u(s,r+".inputs",O={}),"object"==typeof y?"type"in y?y.type===t.FOLDER?a({},e,f(y.schema,r+"."+y.title)):a({},e):(O[d]="value"in y?null!=(p=O[d])?p:y.value:null!=(v=O[d])?v:y,a({},e,((l={})[d]=O[d],l))):(O[d]=null!=(i=O[d])?i:y,a({},e,((c={})[d]=O[d],c)))}),{})}var l=0;function p(e,r,n){var o;return void 0===n&&(n=!0),(o={})["_f_"+e]={type:t.FOLDER,title:e,schema:r,settings:{expanded:n}},o}var v=p;exports.makeButton=function(e,r){var n;return(n={})["_b_"+e]={type:t.BUTTON,title:e,onClick:r},n},exports.makeDirectory=v,exports.makeFolder=p,exports.makeMonitor=function(e,r,n){var o;return(o={})["_m_"+e]={type:t.MONITOR,title:e,ref:r,settings:n},o},exports.makeSeparator=function(){var e;return(e={})["_s_"+l++]={type:t.SEPARATOR},e},exports.useTweaks=function(e,u,l){var p="string"==typeof e?e:void 0,v="string"==typeof e?"root."+e:"root",d=r.useRef("string"==typeof e?l:u),y=r.useRef("string"==typeof e?u:e),O=r.useState((function(){return f(y.current,v)})),h=O[0],R=O[1];return r.useLayoutEffect((function(){var e,r;c=c||new n(a({},d,{container:null==(e=d.current)||null==(r=e.container)?void 0:r.current}));var u=void 0===p,f=p?c.addFolder({title:p}):c,l=function e(r,n,u,c){var f=[],l=o(s,n+".inputs");return Object.entries(r).forEach((function(r){var o=r[0],s=r[1];if("object"==typeof s)if("type"in s){if(s.type===t.MONITOR){var p,v=s.title,d=s.ref,y=s.settings;if("function"==typeof d){var O={current:d()};p=c.addMonitor(O,"current",a({label:v},y)).on("update",(function(){return O.current=d()}))}else p="current"in d?c.addMonitor(d,"current",a({label:v},y)):c.addMonitor(d,v,y);f.push(p)}else if(s.type===t.FOLDER){var h=s.title,R=s.schema,T=c.addFolder(a({title:h},s.settings));f.push(T),e(R,n+"."+h,u,T)}else if(s.type===t.BUTTON){var b=s.title,g=s.onClick;if("function"!=typeof g)throw new Error("Button onClick must be a function.");var E=c.addButton({title:b}).on("click",g);f.push(E)}else if(s.type===t.SEPARATOR){var k=c.addSeparator();f.push(k)}}else{var m=s.value,A=function(e,t){if(null==e)return{};var r,n,o={},u=Object.keys(e);for(n=0;n<u.length;n++)t.indexOf(r=u[n])>=0||(o[r]=e[r]);return o}(s,["value"]),_=void 0!==m?function(e){return"options"in e?(Array.isArray(e.options)&&(e.options=e.options.reduce((function(e,t){var r;return a({},e,((r={})[t]=t,r))}),{})),e):e}(A):void 0,j=c.addInput(l,o,a({label:i.noCase(o)},_)).on("change",(function(e){return u(o,e)}));f.push(j)}else{var x=c.addInput(l,o,{label:i.noCase(o)}).on("change",(function(e){return u(o,e)}));f.push(x)}}),{}),f}(y.current,v,(function(e,t){return R((function(r){var n;return a({},r,((n={})[e]=t,n))}))}),f);return function(){u?l.forEach((function(e){return e.dispose()})):f.dispose()}}),[p,v]),h};
//# sourceMappingURL=use-tweaks.cjs.production.min.js.map
